-- DROP SCHEMA public;

-- CREATE SCHEMA public AUTHORIZATION pg_database_owner;

-- DROP SEQUENCE public."Orders_id_seq";

CREATE SEQUENCE public."Orders_id_seq"
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 9223372036854775807
	START 1
	CACHE 1
	NO CYCLE;
	

-- public.actions definition

-- Drop table

-- DROP TABLE public.actions;

CREATE TABLE public.actions (
	id uuid NOT NULL DEFAULT gen_random_uuid(),
	created_at timestamptz NOT NULL DEFAULT now(),
	photo text NULL,
	CONSTRAINT actions_pkey PRIMARY KEY (id)
);


-- public.categories definition

-- Drop table

-- DROP TABLE public.categories;

CREATE TABLE public.categories (
	id uuid NOT NULL DEFAULT gen_random_uuid(),
	title text NOT NULL,
	CONSTRAINT "Categories_pkey" PRIMARY KEY (id)
);


-- public.deliveries definition

-- Drop table

-- DROP TABLE public.deliveries;

CREATE TABLE public.deliveries (
	id uuid NOT NULL DEFAULT gen_random_uuid(),
	created_at timestamptz NOT NULL DEFAULT now(),
	city text NULL,
	coast int8 NULL,
	CONSTRAINT deliveries_pkey PRIMARY KEY (id)
);


-- public.order_status definition

-- Drop table

-- DROP TABLE public.order_status;

CREATE TABLE public.order_status (
	created_at timestamptz NOT NULL DEFAULT now(),
	"name" text NULL,
	id uuid NOT NULL DEFAULT gen_random_uuid(),
	CONSTRAINT order_status_pkey PRIMARY KEY (id)
);


-- public.products definition

-- Drop table

-- DROP TABLE public.products;

CREATE TABLE public.products (
	id uuid NOT NULL DEFAULT gen_random_uuid(),
	title text NOT NULL,
	category_id uuid NULL,
	"cost" float8 NOT NULL,
	description text NOT NULL,
	is_best_seller bool NULL DEFAULT false,
	CONSTRAINT "Products_pkey" PRIMARY KEY (id),
	CONSTRAINT "Products_categoryId_fkey" FOREIGN KEY (category_id) REFERENCES public.categories(id) ON DELETE SET NULL ON UPDATE CASCADE
);


-- public.cart definition

-- Drop table

-- DROP TABLE public.cart;

CREATE TABLE public.cart (
	id uuid NOT NULL DEFAULT gen_random_uuid(),
	product_id uuid NULL,
	user_id uuid NULL,
	count int8 NULL,
	CONSTRAINT "Basket_pkey" PRIMARY KEY (id)
);


-- public.favourite definition

-- Drop table

-- DROP TABLE public.favourite;

CREATE TABLE public.favourite (
	id uuid NOT NULL DEFAULT gen_random_uuid(),
	product_id uuid NULL,
	user_id uuid NULL,
	CONSTRAINT "Favoutite_pkey" PRIMARY KEY (id)
);


-- public.notifications definition

-- Drop table

-- DROP TABLE public.notifications;

CREATE TABLE public.notifications (
	id uuid NOT NULL DEFAULT gen_random_uuid(),
	created_at timestamptz NOT NULL DEFAULT now(),
	"text" text NULL,
	title text NULL,
	user_id uuid NULL,
	is_read bool NULL DEFAULT false,
	CONSTRAINT messages_pkey PRIMARY KEY (id)
);


-- public.orders definition

-- Drop table

-- DROP TABLE public.orders;

CREATE TABLE public.orders (
	id int8 NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	created_at timestamptz NOT NULL DEFAULT now(),
	email text NULL,
	phone text NULL,
	address text NULL,
	user_id uuid NULL,
	payment_id uuid NULL,
	delivery_coast int8 NULL,
	status_id uuid NULL,
	CONSTRAINT "Orders_pkey" PRIMARY KEY (id)
);


-- public.orders_items definition

-- Drop table

-- DROP TABLE public.orders_items;

CREATE TABLE public.orders_items (
	id uuid NOT NULL DEFAULT gen_random_uuid(),
	created_at timestamptz NOT NULL DEFAULT now(),
	title text NULL,
	coast float8 NULL,
	count int8 NULL,
	order_id int8 NULL,
	product_id uuid NULL,
	CONSTRAINT "OrdersItems_pkey" PRIMARY KEY (id)
);


-- public.payments definition

-- Drop table

-- DROP TABLE public.payments;

CREATE TABLE public.payments (
	created_at timestamptz NOT NULL DEFAULT now(),
	user_id uuid NULL,
	card_name varchar NULL DEFAULT '16'::character varying,
	card_number int8 NULL,
	id uuid NOT NULL DEFAULT gen_random_uuid(),
	CONSTRAINT payments_pkey PRIMARY KEY (id)
);


-- public.profiles definition

-- Drop table

-- DROP TABLE public.profiles;

CREATE TABLE public.profiles (
	id uuid NOT NULL DEFAULT gen_random_uuid(),
	created_at timestamptz NOT NULL DEFAULT now(),
	user_id uuid NOT NULL,
	photo text NULL,
	firstname text NULL,
	lastname text NULL,
	address text NULL,
	phone text NULL,
	CONSTRAINT profiles_pkey PRIMARY KEY (id)
);


-- public.cart foreign keys

ALTER TABLE public.cart ADD CONSTRAINT "Basket_id_product_fkey" FOREIGN KEY (product_id) REFERENCES public.products(id);
ALTER TABLE public.cart ADD CONSTRAINT "Basket_id_user_fkey" FOREIGN KEY (user_id) REFERENCES auth.users(id);


-- public.favourite foreign keys

ALTER TABLE public.favourite ADD CONSTRAINT "Favourite_id_product_fkey" FOREIGN KEY (product_id) REFERENCES public.products(id);
ALTER TABLE public.favourite ADD CONSTRAINT "Favoutite_id_user_fkey" FOREIGN KEY (user_id) REFERENCES auth.users(id);
ALTER TABLE public.favourite ADD CONSTRAINT favourite_product_id_fkey FOREIGN KEY (product_id) REFERENCES public.products(id);
ALTER TABLE public.favourite ADD CONSTRAINT favourite_user_id_fkey FOREIGN KEY (user_id) REFERENCES auth.users(id);


-- public.notifications foreign keys

ALTER TABLE public.notifications ADD CONSTRAINT "Messages_id_user_fkey" FOREIGN KEY (user_id) REFERENCES auth.users(id);
ALTER TABLE public.notifications ADD CONSTRAINT notifications_user_id_fkey FOREIGN KEY (user_id) REFERENCES auth.users(id);


-- public.orders foreign keys

ALTER TABLE public.orders ADD CONSTRAINT "Orders_id_user_fkey" FOREIGN KEY (user_id) REFERENCES auth.users(id);
ALTER TABLE public.orders ADD CONSTRAINT orders_payment_id_fkey FOREIGN KEY (payment_id) REFERENCES public.payments(id);
ALTER TABLE public.orders ADD CONSTRAINT orders_status_id_fkey FOREIGN KEY (status_id) REFERENCES public.order_status(id);


-- public.orders_items foreign keys

ALTER TABLE public.orders_items ADD CONSTRAINT "OrdersItems_id_order_fkey" FOREIGN KEY (order_id) REFERENCES public.orders(id);
ALTER TABLE public.orders_items ADD CONSTRAINT "OrdersItems_uuid_product_fkey" FOREIGN KEY (product_id) REFERENCES public.products(id);


-- public.payments foreign keys

ALTER TABLE public.payments ADD CONSTRAINT payments_user_id_fkey FOREIGN KEY (user_id) REFERENCES auth.users(id);


-- public.profiles foreign keys

ALTER TABLE public.profiles ADD CONSTRAINT profiles_user_id_fkey FOREIGN KEY (user_id) REFERENCES auth.users(id);

INSERT INTO public.categories (id,title) VALUES
	 ('ea4ed603-8cbe-4d57-a359-b6b843a645bc','Outdoor'),
	 ('4f3a690b-41bf-4fca-8ffc-67cc385c6637','Tennis'),
	 ('76ab9d74-7d5b-4dee-9c67-6ed4019fa202','Men'),
	 ('8143b506-d70a-41ec-a5eb-3cf09627da9e','Women');

INSERT INTO public.order_status (created_at,"name",id) VALUES
	 ('2024-05-12 19:16:36.039641+00','Собираем','970aed1e-549c-499b-a649-4bf3f9f93a01'),
	 ('2024-05-12 19:17:04.920148+00','Отменен','8ac05d2f-8371-42f3-b2a9-7beac2fb2c75'),
	 ('2024-05-12 19:16:26.245791+00','Доставлен','a513ae92-701c-49c8-b6ba-c1eda3e79a93');

INSERT INTO public.products (id,title,category_id,"cost",description,is_best_seller) VALUES
	 ('6478da8e-87e6-4a7a-821c-ac38dd861cec','PUMA CA Pro Classic','ea4ed603-8cbe-4d57-a359-b6b843a645bc',13999.0,'Ретро-кроссовки в стиле баскетбола отличаются массивной подошвой и спортивным силуэтом. Прочный нейлоновый верх с замшевыми вставками обеспечивает поддержку и воздухопроницаемость. Амортизирующая подошва гарантирует мягкость и отзывчивость при каждом шаге. Прочная резиновая подошва обеспечивает сцепление и долговечность для бега или активного образа жизни.',true),
	 ('64229908-3713-4147-bedc-68ddaef9c67a','STREETBEAT Plimsoll Retro','76ab9d74-7d5b-4dee-9c67-6ed4019fa202',8499.0,'Ностальгические кеды в стиле ретро перенесут вас в прошлое с классическим холщовым верхом для воздухопроницаемости и комфорта. Контрастная резиновая подошва добавляет винтажный штрих. Удобный круглый носок и гибкая конструкция делают их идеальными для повседневных прогулок и неформальных мероприятий.',false),
	 ('60f2ced6-7b81-465d-bc0f-9c3395b78c56','STREETBEAT Wave','8143b506-d70a-41ec-a5eb-3cf09627da9e',4899.0,'Эти кроссовки сочетают в себе ретро-вдохновение с современными технологиями. Многослойный верх из различных материалов создает уникальный и привлекательный внешний вид. Эксклюзивная подошва обеспечивает амортизацию и комфорт, а выглядывающий механизм шнуровки добавляет спортивный штрих. Идеально подходят для тех, кто хочет выделиться из толпы стильной и функциональной обувью.',false),
	 ('815aa749-975e-4285-bc49-6921556fb9ad','Adidas Niteball','76ab9d74-7d5b-4dee-9c67-6ed4019fa202',19499.0,'Беговые кроссовки с инновационной амортизацией обеспечат мягкий и плавный бег. Трио-резиновая подошва с пенным сердечником поглощает удары и обеспечивает отзывчивость. Верх из сетки с поддерживающими накладками обеспечивает воздухопроницаемость и поддержку. Идеальный выбор для бегунов, ищущих максимальный комфорт и амортизацию.',false),
	 ('21c2d7c0-a2ea-49a2-9198-52bafafc6958','PUMA Velophasis Phased','4f3a690b-41bf-4fca-8ffc-67cc385c6637',16999.0,'Минималистичные повседневные кроссовки сочетают в себе стиль и комфорт. Прочный кожаный верх с тиснением придает изысканный вид. Гибкая подошва из полиуретана обеспечивает комфорт и поддержку во время ходьбы и повседневных занятий. Универсальная и стильная обувь, которую можно сочетать с различными образами.',false),
	 ('6bbdb878-4b52-433c-adb4-a742759939fa','HUGO Leon Run','76ab9d74-7d5b-4dee-9c67-6ed4019fa202',19999.0,'Кроссовки в уличном стиле сочетают в себе смелый дизайн и функциональность. Верх из различных материалов обеспечивает воздухопроницаемость, поддержку и долговечность. Промежуточная подошва поглощает удары и обеспечивает амортизацию, а резиновая подошва гарантирует сцепление и долговечность. Отличный выбор для тех, кто хочет выделиться из толпы стильной и комфортной обувью.',false),
	 ('3fb5c391-a841-45fb-9c7a-2f74d11a4bfa','Adidas Ozmillen','8143b506-d70a-41ec-a5eb-3cf09627da9e',20599.0,'Легкие и дышащие беговые кроссовки созданы для плавных и комфортных пробежек. Верх из сетки и синтетических материалов обеспечивает вентиляцию и поддержку. Амортизирующая подошва поглощает удары и обеспечивает стабильность для преодоления любых расстояний с легкостью. Гибкая резиновая подошва гарантирует сцепление и долговечность.',true),
	 ('74bc6394-6695-4134-992b-1d9972aeb639','HUGO Go1st','8143b506-d70a-41ec-a5eb-3cf09627da9e',21999.0,'Стильные беговые кроссовки сочетают в себе функциональность и привлекательный дизайн. Верх из сетки и синтетических материалов обеспечивает воздухопроницаемость и поддержку. Амортизирующая промежуточная подошва из EVA поглощает удары и возвращает энергию, повышая эффективность бега. Прочная резиновая подошва обеспечивает сцепление и долговечность на различных поверхностях. Отличный выбор для бегунов, желающих хорошо выглядеть и чувствовать себя во время пробежек.',false),
	 ('9b56e21d-9e2c-4cce-b48d-497397f0ba47','Reebok Floatzig 1','76ab9d74-7d5b-4dee-9c67-6ed4019fa202',14999.0,'Гибридные кроссовки, сочетающие элементы баскетбола и беговых кроссовок, создают уникальный и функциональный дизайн. Верх из сетки с накладками из синтетической кожи обеспечивает поддержку и воздухопроницаемость. Амортизация в подошве поглощает удары и обеспечивает отзывчивость, а изогнутая резиновая подошва обеспечивает динамичное движение. Идеально подходят для игроков в баскетбол, которым нужна обувь, обеспечивающая поддержку, комфорт и стиль.',false),
	 ('63d56e11-2769-4980-96df-dc11ea70148d','PUMA Orkid II','ea4ed603-8cbe-4d57-a359-b6b843a645bc',14999.0,'Женские кроссовки для тренировок сочетают в себе стиль и функциональность. Дышащий сетчатый верх с поддерживающими накладками обеспечивает комфорт и воздухопроницаемость во время тренировок. Промежуточная подошва из пены поглощает удары и обеспечивает амортизацию, а резиновая подошва гарантирует сцепление и долговечность. Универсальная и стильная обувь для фитнеса и повседневной носки.',true);
INSERT INTO public.products (id,title,category_id,"cost",description,is_best_seller) VALUES
	 ('9e9c9924-7000-4e7b-8332-33bd8d0bd9b6','PUMA Blktop Rider','76ab9d74-7d5b-4dee-9c67-6ed4019fa202',13999.0,'Кроссовки PUMA Blktop Rider в уличном стиле сочетают в себе смелый дизайн и функциональность. Верх из сетки, замши и кожи обеспечивает воздухопроницаемость, поддержку и долговечность. Промежуточная подошва IMEVA поглощает удары и обеспечивает амортизацию, а резиновая подошва гарантирует сцепление и долговечность.',false),
	 ('4f311959-5ce2-4b3c-94b9-e41dd790e571','STREETBEAT Wave Runner','ea4ed603-8cbe-4d57-a359-b6b843a645bc',4899.0,'Беговые кроссовки STREETBEAT Wave Runner сочетают в себе классический дизайн с современными технологиями. Верх из сетки с замшевыми накладками обеспечивает воздухопроницаемость и поддержку. Волнистая амортизирующая подошва поглощает удары и обеспечивает плавный бег. Гибкая резиновая подошва гарантирует сцепление и долговечность.',false),
	 ('b12a26f0-31ff-4c54-b6e8-9701a25030fe','PUMA All-Pro Nitro','4f3a690b-41bf-4fca-8ffc-67cc385c6637',14499.0,'Футбольные кроссовки премиум-класса разработаны для профессиональных игроков. Верх из синтетической кожи с текстурированными накладками обеспечивает превосходный контроль над мячом и поддержку. Подошва из пены обеспечивает амортизацию и отзывчивость, а резиновые шипы гарантируют превосходное сцепление на поле. Отличный выбор для футболистов, которым нужна высококачественная обувь для соревнований и тренировок.',false),
	 ('afa022ec-f15b-425e-b9d9-fef6c7da654e','PUMA Genetics','ea4ed603-8cbe-4d57-a359-b6b843a645bc',11499.0,'Беговые кроссовки в ретро-стиле сочетают в себе классический дизайн с современными технологиями. Верх из сетки с замшевыми накладками обеспечивает воздухопроницаемость и поддержку. Волнистая амортизирующая подошва поглощает удары и обеспечивает плавный бег. Отличный выбор для бегунов, которые хотят выглядеть стильно и чувствовать себя комфортно во время пробежек.',false);